[global]
type=global
endpoint_identifier_order=username,ip,anonymous
domain_alias=www.homologacaotracevia.com.br
domain_alias=homologacaotracevia.com.br
external_media_address=192.168.1.132
external_signaling_address=192.168.1.132

; TODAS as redes locais, incluindo a do Docker
local_net=192.168.0.0/16
local_net=127.0.0.0/8
local_net=172.25.0.0/16
symmetric_transport=yes



[system]
type=system
domain=www.homologacaotracevia.com.br


[udp_transport]
type=transport
protocol=udp
bind=0.0.0.0:5060
tos=af42
cos=3
allow_reload=yes

[wss_transport]
type=transport
protocol=wss
bind=0.0.0.0
cert_file=/etc/asterisk/keys/fullchain.pem
priv_key_file=/etc/asterisk/keys/privkey.pem
allow_reload=yes

[tls_transport]
type=transport
protocol=tls
bind=0.0.0.0
cert_file=/home/tracevia/app/certificates/homologacaotracevia.com.br-0003/fullchain.pem
priv_key_file=/home/tracevia/app/certificates/homologacaotracevia.com.br-0003/privkey.pem
cipher=ADH-AES256-SHA,ADH-AES128-SHA
method=tlsv1
allow_reload=yes

; == ACL

[acl]
type=acl
deny=0.0.0.0/0.0.0.0
permit=10.0.0.0/255.0.0.0
;permit=172.16.0.0/255.240.0.0
permit=192.168.0.0/255.255.0.0
permit=127.0.0.1
permit=172.25.0.0/16
;permit=186.220.116.138
	

[401]
type=endpoint
context=attendant-normal
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=401
aors=401
transport=wss_transport
direct_media=no
identify_by=username
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[401]
type=auth
auth_type=userpass
password=1234
username=401


[401]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[402]
type=endpoint
context=attendant-normal
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=402
aors=402
transport=wss_transport
direct_media=no
identify_by=username
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[402]
type=auth
auth_type=userpass
password=1234
username=402

[402]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[403]
type=endpoint
context=attendant-normal
disallow=all
allow=ulaw,alaw
webrtc=yes
auth=403
aors=403
transport=wss_transport
direct_media=no
identify_by=username
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes
dtls_verify=no
rtp_keepalive=30
media_address=192.168.2.151

[403]
type=auth
auth_type=userpass
password=1234
username=403

[403]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=25
support_path=yes
minimum_expiration=90 
maximum_expiration=120


[404]
type=endpoint
context=attendant-normal
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=404
aors=404
transport=wss_transport
identify_by=username
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[404]
type=auth
auth_type=userpass
password=1234
username=404

[404]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[405]
type=endpoint
context=attendant-normal
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=405
aors=405
transport=wss_transport
direct_media=no
identify_by=username
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[405]
type=auth
auth_type=userpass
password=1234
username=405

[405]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[406]
type=endpoint
context=attendant-normal
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=406
aors=406
transport=wss_transport
direct_media=no
identify_by=username
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[406]
type=auth
auth_type=userpass
password=1234
username=406

[406]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[100]
type=endpoint
context=caller
disallow=all
allow=ulaw, alaw
webrtc=yes
auth=100
aors=100
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[100]
type=auth
auth_type=userpass
password=1234
username=100

[100]
type=aor
max_contacts=1
remove_existing = yes
qualify_frequency = 40

[101]
type=endpoint
context=caller
disallow=all
allow=ulaw, alaw
webrtc=yes
auth=101
aors=101
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no


[101]
type=auth
auth_type=userpass
password=1234
username=101

[101]
type=aor
max_contacts=1
remove_existing = yes
qualify_frequency = 40

[102]
type=endpoint
context=caller
disallow=all
allow=ulaw, alaw
webrtc=yes
auth=102
aors=102
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[102]
type=auth
auth_type=userpass
password=1234
username=102

[102]
type=aor
max_contacts=1
remove_existing = yes
qualify_frequency = 40

[103]
type=endpoint
context=caller
disallow=all
allow=ulaw, alaw
webrtc=yes
auth=103
aors=103
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[103]
type=auth
auth_type=userpass
password=1234
username=103

[103]
type=aor
max_contacts=1
remove_existing = yes
qualify_frequency = 40

[104]
type=endpoint
context=caller
disallow=all
allow=ulaw, alaw
webrtc=yes
auth=104
aors=104
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[104]
type=auth
auth_type=userpass
password=1234
username=104

[104]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=40

[105]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=105
aors=105
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[105]
type=auth
auth_type=userpass
password=1234
username=105

[106]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=106
aors=106
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no


[106]
type=auth
auth_type=userpass
password=1234
username=106

[106]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=40

[107]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=107
aors=107
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no


[107]
type=auth
auth_type=userpass
password=1234
username=107

[107]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=40

[108]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=108
aors=108
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no


[108]
type=auth
auth_type=userpass
password=1234
username=108

[108]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=40

[109]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=109
aors=109
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no


[109]
type=auth
auth_type=userpass
password=1234
username=109

[109]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=40

[110]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=110
aors=110
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[110]
type=auth
auth_type=userpass
password=1234
username=110

[110]
type=aor
max_contacts=1
remove_existing=yes
qualify_frequency=40

[200]
type=endpoint
context=caller
disallow=all
allow=ulaw,alaw
webrtc=yes
auth=200
aors=200
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[200]
type=auth
auth_type=userpass
password=1234
username=200

[200]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[201]
type=endpoint
context=caller
disallow=all
allow=ulaw,alaw
webrtc=yes
auth=201
aors=201
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes


[201]
type=auth
auth_type=userpass
password=1234
username=201

[201]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[202]
type=endpoint
context=caller
disallow=all
allow=ulaw,alaw
webrtc=yes
auth=202
aors=202
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[202]
type=auth
auth_type=userpass
password=1234
username=202

[202]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=0

[203]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=203
aors=203
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[203]
type=auth
auth_type=userpass
password=1234
username=203

[203]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[204]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=204
aors=204
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[204]
type=auth
auth_type=userpass
password=1234
username=204

[204]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[205]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=205
aors=205
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[205]
type=auth
auth_type=userpass
password=1234
username=205

[205]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[206]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=206
aors=206
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[206]
type=auth
auth_type=userpass
password=1234
username=206

[206]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[207]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=207
aors=207
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[207]
type=auth
auth_type=userpass
password=1234
username=207

[207]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[208]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=208
aors=208
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[208]
type=auth
auth_type=userpass
password=1234
username=208

[208]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[209]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=209
aors=209
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[209]
type=auth
auth_type=userpass
password=1234
username=209

[209]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

[210]
type=endpoint
context=caller
disallow=all
allow=opus,ulaw,alaw
webrtc=yes
auth=210
aors=210
transport=wss_transport
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
rtcp_mux=yes
media_encryption=dtls
dtls_auto_generate_cert=yes

[210]
type=auth
auth_type=userpass
password=1234
username=210

[210]
type=aor
max_contacts=2
remove_existing=no
qualify_frequency=60

